<div class="container-fluid mt-4">
  <div class="row">
    <div class="col-md-7">
      <div class="card shadow-sm border-0">
        <div class="card-header bg-primary text-white py-3 fw-bold">
          Existing Competitions
        </div>
        <div class="card-body p-0">
          <table class="table table-hover mb-0">
            <thead>
              <tr>
                <th class="ps-3">Title</th>
                <th>Status</th>
                <th class="text-center">Actions</th>
              </tr>
            </thead>
            <tbody>
              @for (item of competitionsList(); track item._id) {
                <tr>
                  <td class="ps-3 fw-bold text-dark">{{item.title}}</td>
                  <td>
                    <span class="badge" [ngClass]="{
                      'bg-success': item.status === 'Active',
                      'bg-warning text-dark': item.status === 'Upcoming',
                      'bg-danger': item.status === 'Closed'
                    }">{{item.status}}</span>
                  </td>
                  <td class="text-center">
                    <button class="btn btn-sm btn-outline-primary me-2" (click)="onEdit(item)">
                      <i class="bi bi-pencil"></i> Edit
                    </button>
                    <button class="btn btn-sm btn-outline-danger" (click)="onDelete(item._id)">
                      <i class="bi bi-trash"></i>
                    </button>
                  </td>
                </tr>
              } @empty {
                <tr>
                  <td colspan="3" class="text-center py-4 text-muted">No competitions found.</td>
                </tr>
              }
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <div class="col-md-5">
      <div class="card shadow-sm border-0">
        <div class="card-header bg-primary text-white py-3 fw-bold">
          {{ !competitionObj._id ? 'Add New' : 'Edit' }} Competition
        </div>
        <div class="card-body">
          <form #compForm="ngForm">
            <label class="label-bold">Title</label>
            <input type="text" name="title" [(ngModel)]="competitionObj.title" class="form-control mb-3" placeholder="Enter title">

            <label class="label-bold">Description</label>
            <textarea name="description" [(ngModel)]="competitionObj.description" class="form-control mb-3" placeholder="Description" rows="3"></textarea>
            
            <div class="row">
              <div class="col-6">
                <label class="label-bold">Start Date</label>
                <input type="date" name="start" [(ngModel)]="competitionObj.startDate" class="form-control mb-3">
              </div>
              <div class="col-6">
                <label class="label-bold">End Date</label>
                <input type="date" name="end" [(ngModel)]="competitionObj.endDate" class="form-control mb-3">
              </div>
            </div>

            <label class="label-bold">Status</label>
            <select name="status" [(ngModel)]="competitionObj.status" class="form-select mb-4">
              <option value="Upcoming">Upcoming</option>
              <option value="Active">Active</option>
              <option value="Closed">Closed</option>
            </select>

            <button type="button" class="btn btn-primary w-100 py-2 fw-bold shadow-sm" (click)="saveCompetition()">
              <i class="bi bi-save me-2"></i> Save Competition
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>